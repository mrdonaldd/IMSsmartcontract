<html>

<head>
</head>

<body>

  <form id="form-data" enctype="multipart/form-data">
    <div class="flex-container">
      <!-- <select class="form-select" name="model" id="model" aria-label="select a model">
            <option value="1" selected>1st model 224*224</option>
            <option value="2">2nd model 90*96</option>
        </select> -->
      <input type="text" name="invoice-id" id="invoice-id">
    </div>
    <div class="flex-container">
      <input type="file" class="form-control" id="file" name="file" accept="image/png, image/jpg, image/jpeg" required>
      <button type="submit" class="btn btn-primary mb-3">Predict</button>
    </div>
  </form>

  <div id="result-val"></div>

</body>

<script>


  const myForm = document.getElementById("form-data")
  const inFlie = document.getElementById("file")
  const invoiceID = document.getElementById("invoice-id")

  let result = document.getElementById("result-val");

  myForm.addEventListener("submit", e => {
    e.preventDefault();

    const endpoint = "http://127.0.0.1:3502/uploadfile/";
    const formData = new FormData();

    console.log(inFlie.files);
    console.log(invoiceID.value)

    formData.append("file", inFlie.files[0])
    formData.append("ID", invoiceID.value)

    fetch(endpoint, {
      headers: { "Content-Type": "application/json" },
      method: "post",
      // mode: 'no-cors',
      body: formData
    }).then(res => res.json())
   .then(json => this.setState({ data: json.data, loading: false }))
   .catch(err => console.log(err));

  })
</script>

</html>